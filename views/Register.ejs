<%- include ("includes/header", {"title" : "Register"}) %>

<div class="container" style="margin-top: 50px">
    <%- include ("includes/ResponseAlert", {
        "req" : req
    }) %>
    
    <div class="row">
        <div class="col-md-12 sign-card">
            <form action="<%= req.URL %>/Register" method="POST" class="signform" id="registerform">
                <div class="form-group signforms">
                    <label for="">Name</label>
                    <input type="text" placeholder="Enter Name" name="name" class="form-control" required />
                </div>
                <div class="form-group signforms">
                    <label for="">Email</label>
                    <input type="email" placeholder="Enter EMail" name="email" class="form-control" required />
                </div>
                <div class="form-group signforms">
                    <label for="">Password</label>
                    <input type="text" placeholder="Enter password" name="password" class="form-control" required />
                </div>
                <div class="form-group signforms">
                    <label for="">Confirm Password</label>
                    <input type="text" placeholder="Confirm password" name="confirmpassword" class="form-control" onchange="checkpassword()" required />
                </div>
                <span style="display: flex;margin: 10px 0;justify-content: space-around; width: -webkit-fill-available;">
                    <a class="normal-a" href="<%= req.URL %>/Login">Click here to Login</a>
                    </span>
                <div id="passwordError" style="color: red;"></div> 
                <button style="display: flex; justify-content: space-around;width: 200px; margin-top: 1rem;" type="submit" value="Register" class="btn hover-success" id="submitPassword">Register</button>
            </form>
        </div>
    </div>
</div>

<script>
    
const form = document.getElementById('registerform');
const passwordInput = form.querySelector('input[name="password"]');
const confirmPasswordInput = form.querySelector('input[name="confirmpassword"]');

function displayWarning(message) {
  alert(message); 
}

function handleSubmit(event) {
  event.preventDefault(); 
  const password = passwordInput.value;
  const confirmPassword = confirmPasswordInput.value;
  if (password !== confirmPassword) {
    displayWarning("Passwords don't match");
  }
}

form.addEventListener('submit', handleSubmit);

function checkpassword(){
    const passwordInput = document.querySelector('input[name="password"]');
    const confirmPasswordInput = document.querySelector('input[name="confirmpassword"]');
    const passwordError = document.getElementById('passwordError');
    const password = passwordInput.value;
    const confirmPassword = confirmPasswordInput.value;

    if (password !== confirmPassword) {
    passwordError.textContent = "Passwords don't match";
    }
    else{
    passwordError.textContent = "";
    }
}

window.addEventListener('DOMContentLoaded', (event) => {
    const submitPassword = document.getElementById('submitPassword');
    submitPassword.addEventListener('click', ()=>{
        
    const passwordInput = document.querySelector('input[name="password"]');
    const confirmPasswordInput = document.querySelector('input[name="confirmpassword"]');
    const passwordError = document.getElementById('passwordError');
    const form = document.getElementById('registerform');
    const password = passwordInput.value;
    const confirmPassword = confirmPasswordInput.value;

    if (password !== confirmPassword) {
    passwordError.textContent = "Passwords don't match";
    } else {
    form.submit();
    }
    });
});
</script>


<%- include("includes/footer")%>